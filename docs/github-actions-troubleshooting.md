# GitHub Actions Troubleshooting Guide

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º —Å CI/CD –ø—Ä–æ—Ü–µ—Å—Å–æ–º zaKilo Extension.

## üîç –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. PR Checks –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** Workflow –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Pull Request.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

- PR —Å–æ–∑–¥–∞–Ω –≤ —Ç–æ–π –∂–µ –≤–µ—Ç–∫–µ (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–∑ —Ñ–æ—Ä–∫–∞ –∏–ª–∏ feature –≤–µ—Ç–∫–∏)
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö (`.md`, `docs/`, `screenshots/`)
- –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ PR —Å–æ–∑–¥–∞–Ω –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–µ—Ç–∫–∏
git checkout -b feature/my-feature
git push origin feature/my-feature
# –ó–∞—Ç–µ–º —Å–æ–∑–¥–∞—Ç—å PR –∏–∑ feature/my-feature –≤ main
```

### 2. –û—à–∏–±–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** `npm ci` –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π.

**–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:**

```
Error: Cannot find module 'some-package'
ENOENT: no such file or directory, open 'package-lock.json'
```

**–†–µ—à–µ–Ω–∏–µ:**

1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `package-lock.json` –∑–∞–∫–æ–º–º–∏—á–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å Node.js –≤–µ—Ä—Å–∏–π:
   ```json
   "engines": {
     "node": ">=18.0.0"
   }
   ```

### 3. TypeScript –æ—à–∏–±–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** `npm run type-check` –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–∞–º–∏.

**–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:**

```
error TS2307: Cannot find module '@/some-module'
error TS2304: Cannot find name 'chrome'
```

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –ø—É—à–µ–º
npm run type-check
npm run lint
npm run test:ci
```

### 4. –û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** Build –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π, –Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**

```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏
npm run build:chrome
npm run build:firefox
npm run pack:chrome
npm run pack:firefox
```

**–ß–∞—Å—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç:**

- –£–¥–∞–ª–µ–Ω–∏–µ `node_modules` –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞: `rm -rf node_modules && npm ci`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π –≤ `package.json`

### 5. –ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–µ–ª–∏–∑–∞–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–µ–ª–∏–∑ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–ª–∏ —Ñ–∞–π–ª—ã –Ω–µ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç—Å—è.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ —É `GITHUB_TOKEN`
- –¢–µ–≥ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –û—à–∏–±–∫–∞ –≤ –∏–º–µ–Ω–∞—Ö —Ñ–∞–π–ª–æ–≤

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
node -p "require('./package.json').version"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ–≥–∏
git tag -l
```

### 6. Timeout –æ—à–∏–±–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** Workflow –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –ø–æ timeout.

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ timeout:**

- PR Checks: 15 –º–∏–Ω—É—Ç (—Ç–µ—Å—Ç—ã), 10 –º–∏–Ω—É—Ç (—Å–±–æ—Ä–∫–∞)
- Build and Release: 15 –º–∏–Ω—É—Ç

**–†–µ—à–µ–Ω–∏–µ:**

- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å performance –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–≤–µ–ª–∏—á–∏—Ç—å timeout –≤ workflow

## üõ†Ô∏è –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

### –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

```bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∫ –≤ CI
npm ci
npm run type-check
npm run lint
npm run test:ci
npm run build:chrome
npm run build:firefox
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

```bash
# –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
ls -la ext-dist/
file ext-dist/*.zip
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤

```bash
# –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –¥–ª—è Chrome
cd dist/chrome && cat manifest.json | jq .

# –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –¥–ª—è Firefox
cd dist/firefox && cat manifest.json | jq .
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º PR

- [ ] –ö–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç `npm run lint`
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç `npm run test:ci`
- [ ] TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è `npm run type-check`
- [ ] –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞ –¥–ª—è –æ–±–µ–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –û–ø–∏—Å–∞–Ω–∏–µ PR —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—É—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –û—Ç–∫–∞—Ç –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ —Ä–µ–ª–∏–∑–∞

```bash
# –£–¥–∞–ª–∏—Ç—å —Ç–µ–≥ –ª–æ–∫–∞–ª—å–Ω–æ –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
git tag -d v1.0.1
git push origin :refs/tags/v1.0.1

# –£–¥–∞–ª–∏—Ç—å —Ä–µ–ª–∏–∑ —á–µ—Ä–µ–∑ GitHub UI –∏–ª–∏ API
```

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ workflow

```bash
# –ü—É—Å—Ç–æ–π –∫–æ–º–º–∏—Ç –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ CI
git commit --allow-empty -m "ci: force restart workflow"
git push
```

## üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

1. **–õ–æ–≥–∏ GitHub Actions:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ Actions
2. **–õ–æ–∫–∞–ª—å–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ:** –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –ª–æ–∫–∞–ª—å–Ω–æ
3. **Issue tracker:** –°–æ–∑–¥–∞—Ç—å issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã –∏ –ª–æ–≥–∞–º–∏
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è GitHub Actions:** [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.github.com/en/actions)

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –õ–æ–∫–∞–ª—å–Ω–∞—è –∏–º–∏—Ç–∞—Ü–∏—è CI –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [act](https://github.com/nektos/act) –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ GitHub Actions:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ act
brew install act  # macOS
# –∏–ª–∏
curl https://raw.githubusercontent.com/nektos/act/master/install.sh | sudo bash

# –ó–∞–ø—É—Å–∫ PR checks –ª–æ–∫–∞–ª—å–Ω–æ
act pull_request

# –ó–∞–ø—É—Å–∫ build workflow –ª–æ–∫–∞–ª—å–Ω–æ
act push
```

### –û—Ç–ª–∞–¥–∫–∞ workflow

1. –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —à–∞–≥–∏:

```yaml
- name: Debug info
  run: |
    echo "Node version: $(node -v)"
    echo "NPM version: $(npm -v)"
    echo "Working directory: $(pwd)"
    ls -la
```

2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
   [debug —Ä–µ–∂–∏–º](https://docs.github.com/en/actions/monitoring-and-troubleshooting-workflows/enabling-debug-logging):

```
ACTIONS_STEP_DEBUG=true
ACTIONS_RUNNER_DEBUG=true
```
